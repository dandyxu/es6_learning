<!DOCTYPE html>
<html>
    <head>

        <!-- Load babel 5 - babel-core -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.38/browser.js"></script>

        <script type="text/babel">

            fetch('http://api.open-notify.org/astros.json')
                .then(res => res.json())
                .then(console.log);

            // Use fetch within a function
            const getPeopleInSpace = () => 
                fetch('http://api.open-notify.org/astros.json')
                    .then(res => res.json());
            
            // Only fetch people's names
            const spaceNames = () =>
                getPeopleInSpace()
                    .then(json => json.people)
                    .then(people => people.map( p => p.name))
                    .then(names => names.join(', '));

            spaceNames()
                .then(console.log);

            // const spacePeople = () => {
            //     return new Promise((resolves, rejects) => {
            //         const api = 'http://api.open-notify.org/astros.json';
            //         const request = new XMLHttpRequest();
            //         request.open('GET', api);
            //         request.onload = () => {
            //             if (request.status === 200) {
            //                 resolves(JSON.parse(request.response));
            //             }else {
            //                 rejects(Error(request.statusText));
            //             }
            //         };

            //         request.onerror = error => rejects(err);

            //         request.send();
            //     });
            // };

            // spacePeople().then(
            //     spaceData => console.log(spaceData),
            //     err => console.error(
            //         new Error('Cannot load new space people')
            //     )
            // );

          
        </script>

        <title>Fetch</title>

    </head>

    <body>

        <h1>Hit the pit</h1>

        <h2>Fetch</h2>

        <p>Using fetch to simplify the building promises process</p>

    </body>
</html>